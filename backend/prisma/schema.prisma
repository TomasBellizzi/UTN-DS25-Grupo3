generator client {
  provider = "prisma-client-js"
<<<<<<< HEAD
  output   = "../generated/prisma"
=======
  output   = "../src/generated/prisma"
>>>>>>> 23c934599abc419559a27546c68404de6df9dc03
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Evento {
  id            Int       @id @default(autoincrement())
  nombre        String
  fecha         DateTime
  horaInicio    String
  horaFin       String
  capacidad     Int
  precioEntrada Float
  ubicacion     String
  descripcion   String
  createdAt     DateTime  @default(now())
  entradas      Entrada[]
}

model Entrada {
<<<<<<< HEAD
  id             Int          @id @default(autoincrement())
=======
  id             Int         @id @default(autoincrement())
>>>>>>> 23c934599abc419559a27546c68404de6df9dc03
  eventoId       Int
  cantidad       Int
  precioUnitario Float
  total          Float
<<<<<<< HEAD
  fechaCompra    DateTime       @default(now())
  socioId        Int?
  createdAt      DateTime       @default(now())
  comprobanteUrl String?
  formaDePago    forma_de_pago  @default(EFECTIVO)
  evento         Evento         @relation(fields: [eventoId], references: [id])
=======
  fechaCompra    DateTime    @default(now())
  socioId        Int?
  createdAt      DateTime    @default(now())
  comprobanteUrl String?
  formaDePago    FormaDePago @default(EFECTIVO)
  evento         Evento      @relation(fields: [eventoId], references: [id])
>>>>>>> 23c934599abc419559a27546c68404de6df9dc03
  socio          Socio?      @relation(fields: [socioId], references: [id])
}

model Socio {
  id              Int          @id @default(autoincrement())
  nombre          String
  apellido        String
  email           String
  fechaNacimiento DateTime
  pais            String
  sexo            Sexo
  fotoCarnet      String?
  dni             Int          @unique
  usuarioId       Int          @unique
<<<<<<< HEAD
  clases          ClaseSocio[]
  Cuota           Cuota[]
  entradas        Entrada[]
  usuario         Usuario      @relation(fields: [usuarioId], references: [id])
=======
  Cuota           Cuota[]
  entradas        Entrada[]
  usuario         Usuario      @relation(fields: [usuarioId], references: [id])
  actividades     Actividad[]
>>>>>>> 23c934599abc419559a27546c68404de6df9dc03
}

model Usuario {
  id       Int      @id @default(autoincrement())
  email    String   @unique
  password String
  rol      String
  creadoEn DateTime @default(now())
  socio    Socio?
}

model Actividad {
  id        Int      @id @default(autoincrement())
  nombre    String
  monto     Float
  activo    Boolean  @default(true)
  createdAt DateTime @default(now())
  clases    Clase[]
  Cuota     Cuota[]
<<<<<<< HEAD
=======
  socios    Socio[]
>>>>>>> 23c934599abc419559a27546c68404de6df9dc03
}

model Clase {
  id          Int          @id @default(autoincrement())
  diaSemana   DiaSemana
  horaInicio  String
  horaFin     String
  activo      Boolean      @default(true)
  actividadId Int
  profesorId  Int?
  createdAt   DateTime     @default(now())
  actividad   Actividad    @relation(fields: [actividadId], references: [id])
  profesor    Profesor?    @relation(fields: [profesorId], references: [id])
<<<<<<< HEAD
  socios      ClaseSocio[]
}

model Profesor {
  id        Int      @id @default(autoincrement())
  nombre    String
  apellido  String
  email     String   @unique
  activo    Boolean  @default(true)
  createdAt DateTime @default(now())
  clases    Clase[]
}

model ClaseSocio {
  id      Int   @id @default(autoincrement())
  claseId Int
  socioId Int
  clase   Clase @relation(fields: [claseId], references: [id])
  socio   Socio @relation(fields: [socioId], references: [id])

  @@unique([claseId, socioId])
=======
>>>>>>> 23c934599abc419559a27546c68404de6df9dc03
}

model Cuota {
  id           Int           @id @default(autoincrement())
  fecha_pago   DateTime?     @db.Date
  metodo_pago  forma_de_pago
  monto        Decimal       @db.Decimal(12, 3)
  estado       estado_cuota  @default(PENDIENTE)
  created_at   DateTime      @default(now()) @db.Timestamptz(6)
  socio_id     Int
<<<<<<< HEAD
  mes         Mes?
  actividad_id Int
  Actividad    Actividad     @relation(fields: [actividad_id], references: [id], onUpdate: NoAction)
  Socio        Socio         @relation(fields: [socio_id], references: [id], onUpdate: NoAction)
  comprobante Comprobante[]
=======
  actividad_id Int
  mes          Mes?
  Comprobante  Comprobante[]
  Actividad    Actividad     @relation(fields: [actividad_id], references: [id], onUpdate: NoAction)
  Socio        Socio         @relation(fields: [socio_id], references: [id], onUpdate: NoAction)
>>>>>>> 23c934599abc419559a27546c68404de6df9dc03

  @@index([actividad_id], map: "id_cuota_actividad")
  @@index([estado], map: "id_cuota_estado")
  @@index([socio_id], map: "id_cuota_socio")
}

model Comprobante {
<<<<<<< HEAD
  id         Int      @id @default(autoincrement())
  cuotaId    Int      
  cuota      Cuota    @relation(fields: [cuotaId], references: [id])
  url        String   @db.Text
  subidoEn   DateTime @default(now()) @map("subido_en")
  activo     Boolean  @default(true)

  @@unique([cuotaId, activo], map: "Comprobante_cuotaId_activo_key")
  @@map("Comprobante")
} 
=======
  id        Int      @id @default(autoincrement())
  cuotaId   Int
  url       String
  activo    Boolean  @default(true)
  subido_en DateTime @default(now())
  Cuota     Cuota    @relation(fields: [cuotaId], references: [id])

  @@unique([cuotaId, activo])
}

enum FormaDePago {
  EFECTIVO
  CBU
}
>>>>>>> 23c934599abc419559a27546c68404de6df9dc03

enum Sexo {
  MASCULINO
  FEMENINO
  OTRO
}

enum DiaSemana {
  LUNES
  MARTES
  MIERCOLES
  JUEVES
  VIERNES
  SABADO
  DOMINGO
}

enum estado_cuota {
  PENDIENTE
  VENCIDA
  PAGADA
  EN_REVISION
}

<<<<<<< HEAD
enum forma_de_pago {
  TRANSFERENCIA
  EFECTIVO
}

=======
>>>>>>> 23c934599abc419559a27546c68404de6df9dc03
enum Mes {
  ENERO
  FEBRERO
  MARZO
  ABRIL
  MAYO
  JUNIO
  JULIO
  AGOSTO
  SEPTIEMBRE
  OCTUBRE
  NOVIEMBRE
  DICIEMBRE
}
<<<<<<< HEAD
=======

enum forma_de_pago {
  TRANSFERENCIA
  EFECTIVO
}
>>>>>>> 23c934599abc419559a27546c68404de6df9dc03
